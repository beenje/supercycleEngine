
record(calcout, "$(P)$(R=)HEARTBEAT") {
    field(DESC, "1 Hz counter since startup")
    field(CALC, "(A<2147483647)?A+1:1")
    field(SCAN, "1 second")
    field(INPA, "$(P)$(R=)HEARTBEAT")
    field(FLNK, "$(P)$(R=)EngineCycle NPP MS")
}

record(aSub, "$(P)$(R=)EngineCycle") {
    field(INAM, initEngine)
    field(SNAM, ioEngine)
    #field(SCAN, "1 second")
    field(SCAN, "Passive")
    #alias("$(P)$(R=)IdCycle")
    field(FTA, "ULONG")
    field(FTB, "ULONG")
    field(FTC, "ULONG")
    field(FTD, "ULONG")
    #field(NOA, "1")
    field(FTVA, "ULONG")
    field(NOVA, "10")
    field(FTVB, "ULONG")
    field(NOVB, "100")
    field(FTVC, "ULONG")
    field(NOVC, "100")
    field(FTVD, "ULONG")
    field(NOVD, "100")
    #field(FLNK, "$(P)$(R=)DATAS PP NMS")
    #field(FLNK, "$(P)$(R=)Period NPP MS")
    #field(FLNK, "$(P)$(R=)Dbuf NPP MS")
    #field(FLNK, "$(P)$(R=)Dbuf NPP MS")
    #field(FTVL, "ULONG")
    #field(DTYP, "Obj Prop uint32")
}

record(longin, "$(P)$(R=)IdCycle") {
    field(DESC, "ID Cycle")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(EGU, "id")
    field(INP, "$(P)$(R=)EngineCycle.VALA[0] CPP")
}

record(longin, "$(P)$(R=)Period") {
    field(DESC, "Actuall Cycle Frequency")
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(EGU, "us")
    field(INP, "$(P)$(R=)EngineCycle.VALA[2] CPP")

    #field(FLNK, "$(P)$(R=)Seq0-En-Cmd CP NMS")
    #field(HIHI, "2000000") #0.5Hz
	#field(HIGH, "80000")
	#field(LOW,  "70000")
	#field(LOLO, "10000") #100Hz
    #field(HHSV, "MAJOR")
	#field(HSV,  "MINOR")
	#field(LSV,  "MINOR")
	#field(LLSV, "MAJOR")
}

record(longin, "$(P)$(R=)Sync-lIn_") {
    field(DESC, "SC End EVT")
    field(SCAN, "Passive")
    field(INP, "$(P)$(R=)EngineCycle.VALA[3] CP")
}

record(subArray, "$(P)$(R=)Dbuf-subA_") {
    field(DTYP, "Soft Channel")
    field(SCAN, "Passive")
    field(FTVL, "ULONG")
    field(INP, "$(P)$(R=)EngineCycle.VALB CP")
    field(INDX, "0")
    field(NELM, "8") # "2046")
    field(MALM, "2046") # "2046")
    alias("$(P)$(R=)Dbuf")
}

#record(longout, "$(P)$(R=)Seq0-En-Cmd") {
#  field(SCAN, "Passive")
#  field(DOL , "$(P)$(R=)Period.VAL")
#}

#record(longout, "$(P)$(R=)Seq0-Cmt-Cmd") {
#  field(SCAN, "Passive")
#  field(VAL , "0")
#}
#
#record(longout, "$(P)$(R=)Seq1-En-Cmd") {
#  field(SCAN, "Passive")
#  field(VAL , "0")
#}
#
#record(longout, "$(P)$(R=)Seq1-Cmt-Cmd") {
#  field(SCAN, "Passive")
#  field(VAL , "0")
#}
#record(calcout, "$(P)$(R=)SoftSeq0-Enable-Calc_") {
#    field( CALC, "A")
#    field( INPA, "$(P)$(R=)SoftSeq0-Enable-RB NPP NMS")
#    field( OOPT, "When Non-zero")
#    field( OUT,  "$(P)$(R=)SoftSeq0-Enable-Cmd PP")
#}

record(calcout, "$(P)$(R=)Mux") {
    field(DESC, "MUX 2 bit")
    field(CALC, "(A<1)?A+1:0")
    field(SCAN, "1 second")
    field(INPA, "$(P)$(R=)Mux")
    field(OUT,  "$(P)$(R=)SoftSeq0-Enable-Cmd PP")
    #field(FLNK, "$(P)$(R=)EngineCycle NPP MS")
}

#record(calcout, "$(P)$(R=)SoftSeq0-Enable-Calc_") {
#    field( CALC, "A")
#    field( INPA, "$(P)$(R=)Mux NPP NMS")
#    field( OOPT, "When Non-zero")
#    field( OUT,  "$(P)$(R=)SoftSeq0-Enable-Cmd PP")
#}

record(bo, "$(P)$(R=)SoftSeq0-Enable-Cmd") {
    field( DTYP, "Soft Channel")
    field( DESC, "Enable EVG Sequence")
    #field( OUT,  "")
    field( VAL,  "1")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
    #field( FLNK, "")
    field( ASG , "")
}
